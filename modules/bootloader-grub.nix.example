# GRUB Bootloader Configuration (Alternative to systemd-boot)
# Use this if you prefer GRUB over systemd-boot
# To use: Replace the boot.loader section in configuration.nix with this

{ config, pkgs, ... }:

{
  boot.loader = {
    # Disable systemd-boot
    systemd-boot.enable = false;

    # Enable GRUB
    grub = {
      enable = true;
      device = "nodev"; # Don't install GRUB to MBR
      efiSupport = true;
      efiInstallAsRemovable = false;
      useOSProber = true; # Auto-detect Windows and other OSes
      configurationLimit = 10; # Keep last 10 generations

      # Optional: Theme for GRUB
      # theme = pkgs.nixos-grub2-theme;

      # Timeout in seconds
      # timeout = 5;

      # Default entry
      # default = "0";
    };

    efi = {
      canTouchEfiVariables = true;
      efiSysMountPoint = "/boot"; # or "/boot/efi"
    };
  };

  # Enable os-prober to detect other operating systems
  # This should find Windows automatically
  environment.systemPackages = with pkgs; [
    os-prober
  ];
}
